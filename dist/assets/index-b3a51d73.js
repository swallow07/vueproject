import{g as G,q as K,u as Q,h as k,Q as H,l as J,L as W,T as X,a2 as Z,a as u,o as i,m as C,w as t,f as P,b as e,k as r,i as o,P as ee,c as y,F as w,d as T,K as I,a3 as le,a4 as te,O as M,p as ae,e as oe,_ as se}from"./index-35928c40.js";const de=V=>(ae("data-v-a5f11bc8"),V=V(),oe(),V),ne={class:"card-header"},ue=de(()=>P("span",null,"就诊人管理",-1)),re={key:0,class:"visitors"},ie={key:1,class:"form"},ce=G({__name:"index",setup(V){let _=K(),O=Q(),b=k([]),c=k(0),U=k([]),a=H({name:"",certificatesType:"",certificatesNo:"",sex:0,birthdate:"",phone:"",isMarry:0,isInsure:0,addressSelected:[],address:"",contactsName:"",contactsCertificatesType:"",contactsCertificatesNo:"",contactsPhone:""});J(()=>{g(),Y(),_.query.type=="add"&&(c.value=1),_.query.type=="edit"&&(c.value=1)});const z=()=>{c.value=1},A=()=>{Object.assign(a,{name:"",certificatesType:"",certificatesNo:"",sex:0,birthdate:"",phone:"",isMarry:0,isInsure:0,addressSelected:[],address:"",contactsName:"",contactsCertificatesType:"",contactsCertificatesNo:"",contactsPhone:""})},B=n=>{c.value=1,Object.assign(a,n)},g=async()=>{let n=await W();n.code==200&&(b.value=n.data)},Y=async()=>{let n=await X();n.code==200&&(U.value=n.data)},j={lazy:!0,async lazyLoad(n,s){let h=(await le(n.data.id||"86")).data.map(p=>({id:p.id,label:p.name,value:p.value,leaf:!p.hasChildren}));s(h)}},D=async()=>{try{await te(a),M({type:"success",message:a.id?"更新成功":"新增成功"}),c.value=0,_.query.type?O.back():c.value=0,g()}catch{M({type:"error",message:a.id?"更新失败":"新增失败"})}};Z(()=>b.value,()=>{if(_.query.type=="edit"){let n=b.value.find(s=>s.id==_.query.id);Object.assign(a,n)}});const L=()=>{g()};return(n,s)=>{const v=u("el-button"),h=u("Visitor"),p=u("el-divider"),m=u("el-input"),d=u("el-form-item"),q=u("el-option"),S=u("el-select"),f=u("el-radio"),x=u("el-radio-group"),R=u("el-date-picker"),N=u("el-form"),E=u("el-cascader"),F=u("el-card");return i(),C(F,{class:"box-card"},{header:t(()=>[P("div",ne,[ue,e(v,{class:"button",type:"primary",icon:o(ee),onClick:z},{default:t(()=>[r("添加就诊人")]),_:1},8,["icon"])])]),default:t(()=>[o(c)==0?(i(),y("div",re,[(i(!0),y(w,null,T(o(b),(l,$)=>(i(),C(h,{onChangeScene:B,class:"item",key:l.id,user:l,index:$,onRemoveUser:L},null,8,["user","index"]))),128))])):I("",!0),o(c)==1?(i(),y("div",ie,[e(p,{"content-position":"left"},{default:t(()=>[r("就诊人信息")]),_:1}),e(N,{style:{width:"60%",margin:"10px auto"}},{default:t(()=>[e(d,{label:"用户姓名"},{default:t(()=>[e(m,{placeholder:"请输入用户姓名",modelValue:o(a).name,"onUpdate:modelValue":s[0]||(s[0]=l=>o(a).name=l)},null,8,["modelValue"])]),_:1}),e(d,{label:"证件类型"},{default:t(()=>[e(S,{placeholder:"请你选择证件的类型",style:{width:"100%"},modelValue:o(a).contactsCertificatesType,"onUpdate:modelValue":s[1]||(s[1]=l=>o(a).contactsCertificatesType=l)},{default:t(()=>[(i(!0),y(w,null,T(o(U),l=>(i(),C(q,{key:l.id,label:l.name,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"证件号码"},{default:t(()=>[e(m,{placeholder:"请输入证件号码",modelValue:o(a).certificatesNo,"onUpdate:modelValue":s[2]||(s[2]=l=>o(a).certificatesNo=l)},null,8,["modelValue"])]),_:1}),e(d,{label:"用户性别"},{default:t(()=>[e(x,{modelValue:o(a).sex,"onUpdate:modelValue":s[3]||(s[3]=l=>o(a).sex=l)},{default:t(()=>[e(f,{label:1},{default:t(()=>[r("男")]),_:1}),e(f,{label:0},{default:t(()=>[r("女")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"出生日期"},{default:t(()=>[e(R,{modelValue:o(a).birthdate,"onUpdate:modelValue":s[4]||(s[4]=l=>o(a).birthdate=l),"value-format":"YYYY-MM-DD",type:"date",placeholder:"请选择日期"},null,8,["modelValue"])]),_:1}),e(d,{label:"手机号码"},{default:t(()=>[e(m,{placeholder:"请输入手机号码",modelValue:o(a).phone,"onUpdate:modelValue":s[5]||(s[5]=l=>o(a).phone=l)},null,8,["modelValue"])]),_:1})]),_:1}),e(p,{"content-position":"left"},{default:t(()=>[r("建档信息(完善后部分已有首次就诊不用排队建档)")]),_:1}),e(N,{style:{width:"60%",margin:"10px auto"}},{default:t(()=>[e(d,{label:"婚姻状况"},{default:t(()=>[e(x,{modelValue:o(a).isMarry,"onUpdate:modelValue":s[6]||(s[6]=l=>o(a).isMarry=l)},{default:t(()=>[e(f,{label:1},{default:t(()=>[r("已婚")]),_:1}),e(f,{label:0},{default:t(()=>[r("未婚")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"自费/医保"},{default:t(()=>[e(x,{modelValue:o(a).isInsure,"onUpdate:modelValue":s[7]||(s[7]=l=>o(a).isInsure=l)},{default:t(()=>[e(f,{label:1},{default:t(()=>[r("自费")]),_:1}),e(f,{label:0},{default:t(()=>[r("医保")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"当前住址"},{default:t(()=>[e(E,{props:j,modelValue:o(a).addressSelected,"onUpdate:modelValue":s[8]||(s[8]=l=>o(a).addressSelected=l)},null,8,["modelValue"])]),_:1}),e(d,{label:"详细地区"},{default:t(()=>[e(m,{placeholder:"请输入用户的详细地址",modelValue:o(a).address,"onUpdate:modelValue":s[9]||(s[9]=l=>o(a).address=l)},null,8,["modelValue"])]),_:1})]),_:1}),e(p,{"content-position":"left"},{default:t(()=>[r("联系人信息(选填)")]),_:1}),e(N,{style:{width:"60%",margin:"10px auto"},"label-width":"80"},{default:t(()=>[e(d,{label:"用户姓名"},{default:t(()=>[e(m,{placeholder:"请输入用户姓名",modelValue:o(a).contactsName,"onUpdate:modelValue":s[10]||(s[10]=l=>o(a).contactsName=l)},null,8,["modelValue"])]),_:1}),e(d,{label:"证件类型"},{default:t(()=>[e(S,{placeholder:"请你选择证件的类型",style:{width:"100%"},modelValue:o(a).contactsCertificatesType,"onUpdate:modelValue":s[11]||(s[11]=l=>o(a).contactsCertificatesType=l)},{default:t(()=>[(i(!0),y(w,null,T(o(U),l=>(i(),C(q,{key:l.id,label:l.name,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"证件号码"},{default:t(()=>[e(m,{placeholder:"请输入证件号码",modelValue:o(a).contactsCertificatesNo,"onUpdate:modelValue":s[12]||(s[12]=l=>o(a).contactsCertificatesNo=l)},null,8,["modelValue"])]),_:1}),e(d,{label:"手机号码"},{default:t(()=>[e(m,{placeholder:"请输入手机号码",modelValue:o(a).contactsPhone,"onUpdate:modelValue":s[13]||(s[13]=l=>o(a).contactsPhone=l)},null,8,["modelValue"])]),_:1}),e(d,null,{default:t(()=>[e(v,{type:"primary",size:"default",onClick:D},{default:t(()=>[r("提交")]),_:1}),e(v,{type:"primary",size:"default",onClick:A},{default:t(()=>[r("重置")]),_:1})]),_:1})]),_:1})])):I("",!0)]),_:1})}}});const me=se(ce,[["__scopeId","data-v-a5f11bc8"]]);export{me as default};
